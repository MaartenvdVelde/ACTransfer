define task test {
initial-goals: (test)
rt: -2.0
lf: 0.3
ans: 0.1
default-activation: 1.0
references: (fact-type)
}

define facts {
    (one number 1)
    (two number 2)
    (fact1+1 addition-fact one one two)
}


define goal test {

operator first-step {
    WM1 = nil
==>
    fact-type -> WM1
    >>WM2
    one -> WM1
}

operator second-step {
    WM1 = one
==>
    WM<<
    two -> WM3
}

operator test-retrieve {
    WM3 = two
    RT1 = nil
==>
    fact-type -> RT1
    one -> RT2
}

operator dig-in-retrieve-that-fails {
    WM3 = two
    RT1 = fact-type
    >>RT2
    RT1 = ghost
    RT<<
    ==>
    nil -> G1
    say -> AC1
    RT4 -> AC2
}


operator dig-in-retrieve {
    WM3 = two
    RT1 = fact-type
    >>RT2
    RT1 = number
    RT<<
==>
    nil -> G1
    say -> AC1
    RT4 -> AC2
}

}

define script {
    set-goal("test", ["fact-type", "addition-fact"])
    screen("go")
    run-until-action("say")
    issue-reward()
    trial-end()
}
